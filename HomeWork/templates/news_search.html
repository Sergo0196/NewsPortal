{% extends 'flatpages/default.html'%}
{% load custom_filters %}

{% block title %}
Post
{% endblock title %}

{% block content %}

    <h1>Поиск новостей и статей</h1>
    <form action="" method="get">
        {{ filterset.form.as_p }}
        <input type="submit" class="mt-3 btn-primary" value="Найти"/>
    </form>

    {% if news %}
        <table>
            <tr>
                <td>Заголовок</td>
                <td>Дата публикации</td>
                <td>Текст</td>
            </tr>
            {% for i in news %}
            <tr>
                <td>{{ i.title|censor }}</td>
                <td>{{ i.date_time|date:'d M Y' }}</td>
                <td>{{ i.text|truncatechars:20|censor }}</td>

            </tr>
            {% endfor %}
        </table>
    {% else %}
        Новостей нет!
    {% endif %}
{% endblock content %}